<!DOCTYPE html>
<html lang="en-us">

  <head>
  <script type="text/javascript">
    var host = "grahamgilbert.com";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
        window.location.protocol = "https";
  </script>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      graham gilbert &middot; Mac administration and assorted nerdity
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <!--link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico"-->

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
  <link href='/stylesheets/all-b18cc7d6d5710987503b687ec013f838.css' media='all' rel='stylesheet' type='text/css'>
  <link type="application/atom+xml" rel="alternate" href="https://grahamgilbert.com//atom.xml" title="graham gilbert" />
  <style>
  .clear{
    clear:both
  }
  .float-left {
    float:left;
    padding-right:25px;
    padding-bottom:25px;
  }

  .float-right {
    float:right;
    padding-left:25px;
    padding-bottom:25px;
  }
  </style>
</head>

  <body class="theme-base-0d">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          graham gilbert
        </a>
      </h1>
      <p class="lead">A Mac admin, automating the hell out of things.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
      
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/talks/">Talks</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
      </nav>
      <p>

      <a href="https://twitter.com/grahamgilbert"><img style="display:inline;" src="/images/social/twitter.png" /></a> <a href="https://github.com/grahamgilbert"><img style="display:inline;" src="/images/social/github.png" /></a> <a href="https://www.linkedin.com/in/grahamgilbert"><img style="display:inline;" src="/images/social/linkedin.png" /></a>
      </p>

    <p>
      <small>The opinions on this site are my own, and are not necessarily shared by my employer.</small>
    </p>

  </div>
</div>

    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2016/12/06/sal-3-0/">
        Sal 3.0
      </a>
    </h1>

    <span class="post-date">06 Dec 2016</span>


    
  <p><a href="https://github.com/salopensource/sal/releases/tag/3.0.0">Sal 3.0</a> is a massive upgrade on Sal 2.7, so massive thanks to everyone who has contributed code and bug reports. In particular, big thanks go out to <a href="https://github.com/sheagcraig">@sheagcraig</a>  for his work on the completely rewritten application inventory features.</p>

<h2 id="whats-new-in-sal-30">What’s new in Sal 3.0?</h2>

<h3 id="inventory">Inventory</h3>

<p>Sal’s application inventory tracking has been completely re-written (thanks again Shea), and is much more useful, allowing for greater detail on what is installed, and where across your fleet.</p>

<h3 id="search">Search</h3>

<p>We have migrated the basic search from using an external application that relied on building caches (so doubling the size of your database), to just querying the database directly.</p>

<p>The advanced search is completely new - it allows you to build up complex queries that would previously require you to build a plugin. These queries can also be saved so they can be shared with the rest of your team.</p>

<h3 id="plugins">Plugins</h3>

<p>Your plugins can now process data server side during checkin. Perhaps you want to update Sal with information from your Inventory tool, or call out to a web service. Documentation can be found <a href="https://github.com/salopensource/sal/wiki/Additional-processing-of-data-in-Pugins">over here</a>.</p>

<h3 id="security">Security</h3>

<p>Sal scripts version <a href="https://github.com/salopensource/sal-scripts/releases/tag/2.0.0">2.0.0</a> now uses basic http authentication by default (<a href="https://github.com/salopensource/sal/wiki/Client-configuration">using the key set in preferences</a>) on any endpoint that it retrieves data from (external scripts etc). This means that any potentially sensitive data you may have in your client side scripts is now protected. This can be <a href="https://github.com/salopensource/sal/wiki/Settings#basic-authentication-on-http-endpoints">disabled if desired</a> - not recommended!.</p>

<h3 id="performance">Performance</h3>

<p>If you have a lot of plugins enabled with client side scripts to download, you will be getting a lot of requests to your server. There is now a script available that will build a package containing all the external scripts enabled on your Sal install (or just download the files so they can be deployed with something like Puppet or Chef), and after setting the <a href="https://github.com/salopensource/sal/wiki/Client-configuration">preference</a>, the client will use these in preference to downloading them again.</p>

<p>If you are running Facter, you may be shipping duplicate data that Sal already collects - you are now able to specify facts that should not be sent to the server (enabling you to set different facts to ignore per client) or <a href="https://github.com/salopensource/sal/wiki/Settings#ignore_facts">set it on the server to configure it globally</a>.</p>

<p>Finally, every single transaction with the database has been optimised. A usual run from a client that has Facter installed with 50 facts has been reduced from 70+ calls to the database to less than 10 (Postgres only, sorry SQLite and MySQL users).</p>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2016/11/04/macad-uk-2017/">
        MacAD.UK 2017
      </a>
    </h1>

    <span class="post-date">04 Nov 2016</span>


    
  <p>I’m delighted to announce that the lovely people at Amsys have asked me to return to speak at <a href="http://www.macad.uk/">MacAD.UK 2017</a> for it’s second year. This year I will be talking about <a href="http://www.macad.uk/speaker/speaker-graham-gilbert/">Airbnb’s transition from a commercial macOS management platform to an entirely open source stack</a> - <em>“Something something commercial, something something open source”</em>.</p>

<p>See you all in February!</p>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2016/10/06/0-to-imagr-ing-in-45-minutes/">
        0 to Imagr-ing in 45 minutes
      </a>
    </h1>

    <span class="post-date">06 Oct 2016</span>


    
  <p>If you attended my talk in Gothenburg today, thank you! The slides from my primary talk, “0 to Imagr-ing in 45 minutes” are <a href="/images/posts/2016-10-06/0 to Imagr-ing.pdf">available here</a>, and you can find the all of the <a href="https://github.com/grahamgilbert/imagr_macsysadmin_2016">code I used on GitHub</a>. If for some reason you would like my slides on beer in London (or, VMware is slow at imaging a disk and I needed to fill time), you can <a href="/images/posts/2016-10-06/Beer in London.pdf">also get them here</a>.</p>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2016/09/05/return-of-the-yo-notifications/">
        Return of the Yo notifications
      </a>
    </h1>

    <span class="post-date">05 Sep 2016</span>


    
    <p><a href="/blog/2016/08/29/more-notifications-with-yo-the-yo-strikes-back/">Last time</a>, took our first steps to notify our users about updates in a slight nicer way. This time we are going to modify our script so that our users are only bugged once a day, and also not promoted to install 10.11 if they’re already running it.</p>

<p>Unfortunately for some, whilst this will be possible if we stuck to using bash, it would drive me insane, so we are switching to Python. Don’t be scared! Python makes a lot of sense once you get your head around it, and you’ll be a much happier mac admin once you leave the 1500 line bash scripts behind. 
  <p><a href="/blog/2016/09/05/return-of-the-yo-notifications/">Read more →</a></p>
  
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2016/08/29/more-notifications-with-yo-the-yo-strikes-back/">
        More notifications with Yo: The Yo Strikes Back
      </a>
    </h1>

    <span class="post-date">29 Aug 2016</span>


    
    <p>Last time, we took our first look at the fantastic Yo. This time, we’re going to o something useful - we’re going to open an item up in Managed Software Centre.</p>

<p>Let’s build our command to show the notification. Note that InstallElCap is the name of the relevent item in Munki. You could for example, replace it with <code>munki://detail-GoogleChrome</code>.</p>

<figure class="code-highlight-figure"><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nv">$ </span>/Applications/Utilities/yo.app/Contents/MacOS/yo --title <span class="s2">&quot;Update Required&quot;</span> --info <span class="s2">&quot;Your operating system is out of date. Please upgrade ASAP.&quot;</span> --action-btn <span class="s2">&quot;More Info&quot;</span> --action-path <span class="s2">&quot;munki://detail-InstallElCap&quot;</span></div></div></pre></div></figure>

<p><img class="center" src="/images/posts/2016-08-29/Update_Required.gif" />

  <p><a href="/blog/2016/08/29/more-notifications-with-yo-the-yo-strikes-back/">Read more →</a></p>
  
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page3">Older</a>
  
  
    
      <a class="pagination-item newer" href="/">Newer</a>
    
  
</div>

    </div>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27233739-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
