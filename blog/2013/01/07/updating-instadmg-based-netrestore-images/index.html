<div class="post">
  <h1 class="post-title">Updating InstaDMG based NetRestore images</h1>
  <span class="post-date">07 Jan 2013</span>
  <p>This probably isn’t news to anyone else, but I made a discovery last week that will save me a fair bit of time.</p>

<p>Whilst staring at System Image Utility after yet another change to the build, I thought that there must be a better way of doing this, bearing in mind that the basic InstaDMG process is:</p>

<ul>
  <li>Install the OS</li>
  <li>Install Packages</li>
  <li><strong>Make a read-only DMG</strong></li>
  <li><strong>Prep the DMG for ASR</strong></li>
</ul>

<p>And SIU’s process is:</p>

<ul>
  <li><strong>Make a read-only DMG</strong></li>
  <li><strong>Prep the DMG for ASR</strong></li>
  <li>Copy it into a writable disk image with a stripped down OS to restore the image.</li>
</ul>

<p>So, two steps are duplicated. This inefficiency must be stopped!</p>

<p>After a 30 second hunt in the NetInstall.dmg file that SIU spits out, I saw a file called System.dmg in the Packages folder - sure enough, it was my InstaDMG image. I replaced it with my new build, and it worked flawlessly.</p>

<p>If your new image is larger than the one you’re replacing, you just need to expand the NetInstall.dmg image to a size large enough to accomodate the new image.</p>

<pre><code>hdiutil resize -growonly -size 15g /path/to/your/NetRestore.nbi/NetInstall.dmg
</code></pre>

<p>Replace the 15g with whatever size you want, 15 GB was plenty to accomodate my updated image.</p>

</div>

<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//grahamgilbert.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/2017/01/19/pocket-mac-admins-guide-to-london/">
            Pocket Mac admin's guide to London
            <small>19 Jan 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2017/01/11/imagr-with-target-disk-mode/">
            Imagr with target disk mode
            <small>11 Jan 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2016/12/15/enable-sip-with-munki/">
            Enable SIP with Munki
            <small>15 Dec 2016</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>
