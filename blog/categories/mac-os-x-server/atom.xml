<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Mac OS X Server | graham gilbert]]></title>
  <link href="http://grahamgilbert.com/blog/categories/mac-os-x-server/atom.xml" rel="self"/>
  <link href="http://grahamgilbert.com/"/>
  <updated>2015-07-07T18:23:07+01:00</updated>
  <id>http://grahamgilbert.com/</id>
  <author>
    <name><![CDATA[Graham Gilbert]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Headless VirtualBox]]></title>
    <link href="http://grahamgilbert.com/blog/2012/04/21/headless-virtualbox/"/>
    <updated>2012-04-21T22:06:00+01:00</updated>
    <id>http://grahamgilbert.com/blog/2012/04/21/headless-virtualbox</id>
    <content type="html"><![CDATA[<p>I recently had a requirement to run an Ununtu machine, but the client had only mac servers, and no budget for additional hardware. The solution turned out to be VirtualBox &ndash; we could run it headless and have it start when the mac booted.</p>

<p>First, get your VM set up how you like it and shut it down. I like to move my VMs out of the boot drive, so move the entire ~/VirtualBox VMs directory onto your storage device.</p>

<p>VirtualBox needs to know where the vm lives now, so remove the original vm you made, then double click the moved vbox file.</p>

<p>One last step &ndash; the launchd item to control the vm.</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
&lt;key&gt;Label&lt;/key&gt;
  &lt;string&gt;com.yourcompany.mysupervm.plist&lt;/string&gt;
  &lt;key&gt;ProgramArguments&lt;/key&gt;
  &lt;array&gt;
    &lt;string&gt;/usr/bin/VBoxHeadless&lt;/string&gt;
    &lt;string&gt;-startvm&lt;/string&gt;
    &lt;string&gt;The name of your VM&lt;/string&gt;
  &lt;/array&gt;
&lt;key&gt;KeepAlive&lt;/key&gt;
&lt;true/&gt;
  &lt;key&gt;UserName&lt;/key&gt;
  &lt;string&gt;admin&lt;/string&gt;
  &lt;key&gt;WorkingDirectory&lt;/key&gt;
  &lt;string&gt;/Volumes/Storage&lt;/string&gt;
  &lt;key&gt;RunAtLoad&lt;/key&gt;
  &lt;true/&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre>

<p>Change some &ldquo;The name of your VM&rdquo; to what your vm is actually called, change UserName to the admin username on the server, and finally change the WorkingDirectory path to match the location of your VirtualBox VMs directory.</p>

<p>Save the plist into /Library/LaunchDaemons/ as com.yourcompany.mysupervm.plist (or whatever you want) and chown it to root:wheel</p>

<p>To start the vm, crack open terminal and issue</p>

<pre><code>sudo launchctl load /Library/LaunchDaemons/com.yourcompany.mysupervm.plist
</code></pre>

<p>And to stop:</p>

<pre><code>sudo launchctl unload /Library/LaunchDaemons/com.yourcompany.mysupervm.plist
</code></pre>

<p>The vm will start at boot, and will continue to run, so to stop it, you need to unload the plist.</p>
]]></content>
  </entry>
  
</feed>
